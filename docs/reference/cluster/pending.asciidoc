[[cluster-pending]]
== 暂挂集群任务

暂挂集群任务API返回一个集群层面上的仍未被执行的改变（例如创建索引、更新映射、分配或销毁分片）的列表。

NOTE: 该API返回一个有关于集群即将进行的更新的列表。该API的返回与任务管理API返回的任务列表有所不同，任务管理API
<<tasks,Task Management API>> 返回的任务列表包括周期任务和用户创建的任务，例如集群统计任务、查询、或创建索引请求。然而如果一个类如创建索引命令的用户创建任务产生了集群状态的更新，那么该任务的活动也许会同时被任务管理API和暂挂集群任务API返回。

[source,js]
--------------------------------------------------
GET /_cluster/pending_tasks
--------------------------------------------------
// CONSOLE

一般情况下，由于集群层次的改变都非常快，该命令会返回一个空的集合。然而，当集群层面的任务变多且产生任务队列，返回将和下文给出的相类似：

[source,js]
--------------------------------------------------
{
   "tasks": [
      {
         "insert_order": 101,
         "priority": "URGENT",
         "source": "create-index [foo_9], cause [api]",
         "time_in_queue_millis": 86,
         "time_in_queue": "86ms"
      },
      {
         "insert_order": 46,
         "priority": "HIGH",
         "source": "shard-started ([foo_2][1], node[tMTocMvQQgGCkj7QDHl3OA], [P], s[INITIALIZING]), reason [after recovery from shard_store]",
         "time_in_queue_millis": 842,
         "time_in_queue": "842ms"
      },
      {
         "insert_order": 45,
         "priority": "HIGH",
         "source": "shard-started ([foo_2][0], node[tMTocMvQQgGCkj7QDHl3OA], [P], s[INITIALIZING]), reason [after recovery from shard_store]",
         "time_in_queue_millis": 858,
         "time_in_queue": "858ms"
      }
  ]
}
--------------------------------------------------
// NOTCONSOLE
// We can't test tasks output
